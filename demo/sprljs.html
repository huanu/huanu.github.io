<!DOCTYPE html>
<html>
  <head>
    <title>视频监控存储容量计算</title>
    <meta http-equiv="content-type" content="text/html; charset=GB18030">
    <link rel="shortcut icon" href="/img/favicon.ico"/>

    <!--<link rel="stylesheet" type="text/css" href="./styles.css">-->
        <style>
            table{
                width:960px;
                text-align:center;
                font-family:"微软雅黑","黑体";
                border-collapse:collapse;
            }
            caption{
                font-size:22px;
                font-weight: bold;
            }
            input{
                width:100%;
                text-align:center;
                font-family:"微软雅黑","黑体";
            }
            .td3{
                text-align:left;
            }
            .countField{
                background:#eee;
            }
            .countFieldInput{
                background:#eee;
                border:0px;
                color:#F00;
            }
            .diskSizeGB{
                width:100px;
            }
            .remark{
                color:#00F;
            }
        </style>
        <script type="text/javascript">
            var storageSize=0;//存储容量
            var diskGbSize = 0;//硬盘实际折算容量
            var machineDiskSize = 0;//每台设备满配实际可用容量
            var disk = 0;//所需视频存储硬盘数
            var dsaCount = 0;//DS-A设备数量
            /**
            *
            *计算所需存储容量
            *
            */
            function countSize(){
                var field = ['lineSum','kbps','hours','days'];
                for(var i=0;i < field.length;i++){
                    var fieldValue = document.getElementById(field[i]).value;
                    if(i == 0){
                        storageSize = fieldValue;
                    }else{
                        storageSize *= fieldValue;
                    }
                }
                storageSize = (storageSize*3600/8/1024/1024/1024);
                document.getElementById('size').value=storageSize.toFixed(2);
                countDisk();
                getDsaCount();
            }
            
            /**
            *
            *计算所需视频存储硬盘数
            *
            */
            function countDisk(){
                var fieldValue = document.getElementById('format').value;
                var val = storageSize/(1 - fieldValue/100)*1024/diskGbSize;
                disk = Math.ceil(val);
                document.getElementById('diskSum').value = disk;
                countMachineDiskSize();
            }
            
            /**
            *
            *计算硬盘实际折算容量
            *
            */
            function countGB(obj){
                var val = obj.value/1.024/1.024/1.024;
                diskGbSize = val;
                document.getElementById('diskSizeGB').value = diskGbSize.toFixed(2);
                countDisk();
                countMachineDiskSize();
            }
            
            /**
            *
            *计算每台设备满配实际可用容量
            *
            */
            function countMachineDiskSize(){
                var disk = document.getElementById('disk').value;
                var raidSum = document.getElementById('raidSum').value;
                var backupDisks = document.getElementById('backupDisks').value;
                var format = document.getElementById('format').value;
                var val = (disk - backupDisks - raidSum)*diskGbSize*(1 - format/100)/1024;
                machineDiskSize = val.toFixed(1);
                document.getElementById('machineDiskSize').value = machineDiskSize;
                getDsaCount();
            }
            
            /**
            *
            *计算需要DS-A设备数量
            *
            */
            function getDsaCount(){
                var val = storageSize/machineDiskSize;
                dsaCount = Math.ceil(val);
                document.getElementById('dsaCount').value = dsaCount;
                needDiskCount();
            }
            
            /**
            *
            *计算实际需要硬盘
            *
            */
            function needDiskCount(){
                var raidSum = document.getElementById('raidSum').value;
                var backupDisks = document.getElementById('backupDisks').value;
                var val = disk + raidSum* dsaCount + backupDisks* dsaCount;
                document.getElementById('needDiskCount').value = val;
            }
        </script>
  </head>
  
  <body>
      <center>
      <form>
          <table border="1" bordercolor="#000000" cellspacing="0">
              <caption>视频监控存储容量计算</caption>
              <tr>
                  <td width="220">视频监控路数</td>
                  <td width="160"><input type="text" name="lineSum" id="lineSum" onblur="countSize()"></td>
                  <td class="td3">路</td>
              </tr>
              <tr>
                  <td>码流大小</td>
                  <td><input type="text" name="kbps"  id="kbps" onblur="countSize()"></td>
                  <td class="td3">Kbps</td>
              </tr>
              <tr>
                  <td>每天录像时间</td>
                  <td><input type="text" name="hours" id="hours" onblur="countSize()"></td>
                  <td class="td3">小时</td>
              </tr>
              <tr>
                  <td>保存天数</td>
                  <td><input type="text" name="days" id="days" onblur="countSize()"></td>
                  <td class="td3">天</td>
              </tr>
              <tr class="countField">
                  <td>所需存储容量</td>
                  <td><input type="text" name="size" id="size" class="countFieldInput" readonly="readonly"></td>
                  <td class="td3">TB</td>
              </tr>
              <tr>
                  <td>格式化损失</td>
                  <td><input type="text" name="format" id="format" onblur="countDisk();countMachineDiskSize()"></td>
                  <td class="td3">%（一般为5%）</td>
              </tr>
              <tr>
                  <td>RAID级别</td>
                  <td><input type="text" name="raid" id="raid"></td>
                  <td class="td3">5,6</td>
              </tr>
              <tr class="countField">
                  <td>选用DS-A存储设备</td>
                  <td><input type="text" name="dsa" id="dsa"></td>
                  <td class="td3">A9,A10,A20</td>
              </tr>
              <tr>
                  <td>选用存储盘位</td>
                  <td><input type="text" name="disk" id="disk" onblur="countMachineDiskSize()"></td>
                  <td class="td3">8, 12, 16, 24,48</td>
              </tr>
              <tr class="countField">
                  <td>选用硬盘容量</td>
                  <td ><input type="text" name="diskSize" id="diskSize" onblur="countGB(this)" /></td>
                  <td class="td3"><span>标称1TB硬盘实际折算容量      </span><input type="text" name="diskSizeGB" id="diskSizeGB" class="countFieldInput diskSizeGB" readonly="readonly" />GB</td>
              </tr>
              <tr class="countField">
                  <td>RAID组数/柜</td>
                  <td><input type="text" name="raids" id="raids" ></td>
                  <td class="td3">8,12,16盘位建议一个RAID，24盘位建议两个RAID，48盘位建议三个RAID</td>
              </tr>
              <tr>
                  <td>RAID组冗余盘总数/柜</td>
                  <td><input type="text" name="raidSum" id="raidSum" onblur="getDsaCount()" /></td>
                  <td class="td3">个</td>
              </tr>
              <tr>
                  <td>热备盘数</td>
                  <td><input type="text" name="backupDisks" id="backupDisks" onblur="countMachineDiskSize()" /></td>
                  <td class="td3">1:有热备盘; 0:没有热备盘</td>
              </tr>
              <tr class="countField">
                  <td>所需视频存储硬盘数</td>
                  <td><input type="text" name="diskSum" id="diskSum" class="countFieldInput" readonly="readonly"></td>
                  <td class="td3">个</td>
              </tr>
              <tr class="countField">
                  <td>每台设备满配实际可用容量</td>
                  <td><input type="text" name="machineDiskSize" id="machineDiskSize" class="countFieldInput" readonly="readonly"></td>
                  <td class="td3">TB</td>
              </tr>
              <tr class="countField">
                  <td>需要DS-A设备数量</td>
                  <td><input type="text" name="dsaCount" id="dsaCount" class="countFieldInput" readonly="readonly"></td>
                  <td class="td3">台</td>
              </tr>
              <tr class="countField">
                  <td>实际需要硬盘</td>
                  <td><input type="text" name="needDiskCount" id="needDiskCount" class="countFieldInput" readonly="readonly"></td>
                  <td class="td3">个</td>
              </tr>
              <tr>
                  <td colSpan=3 class="remark">注：输入框内，为根据项目情况，输入的参数；红字为关键计算输出。</td>
              </tr>
          </table>
      </form>
      </center>
  </body>
</html><!--